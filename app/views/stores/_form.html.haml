= form_with(model: @store, data: { controller: 'nested-form', nested_form_wrapper_selector_value: '.nested-form-wrapper' }) do |f|

  - if @store.errors.any?
    #error_explanation
      %h2= "#{pluralize(@store.errors.count, "error")} prohibited this store from being saved:"
      %ul
        - @store.errors.full_messages.each do |message|
          %li= message

  .field.text-white
    = f.label :name, class: "form-label text-white fs-4"
    = f.text_field :name, class: "form-control mb-3"
  .field.text-white
    = f.label :street, class: "form-label text-white fs-4"
    = f.text_field :street, class: "form-control mb-3"
  .field.text-white
    = f.label :city, class: "form-label text-white fs-4"
    = f.text_field :city, class: "form-control mb-3"
  .field.text-white
    = f.label :state, class: "form-label text-white fs-4"
    = f.text_field :state, class: "form-control mb-3"
  .field.text-white
    = f.label :country, class: "form-label text-white fs-4"
    = f.text_field :country, class: "form-control mb-3"
  .field.text-white
    = f.label :photo, class: "form-label text-white fs-4"
    = f.file_field :photo, class: "form-control mb-3"
  %template{"data-nested-form-target" => "template"}
    = f.fields_for :products, Product.new, child_index: 'NEW_RECORD' do |product_fields|
      = render "product_form", f: product_fields
  = f.fields_for :products do |product_fields|
    = render "product_form", f: product_fields
  %div{"data-nested-form-target" => "target"}
    .field.mb-3
      %button.form-label.btn.btn-dark.fs-3{"data-action" => "nested-form#add", :type => "button"} Create Product
  .actions.text-white
    = f.submit 'Save', class: "btn btn-dark"
  